<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Han&#39;s Blog</title>
  <icon>https://www.gravatar.com/avatar/c5b87fd529788a034c54cdd73dab7213</icon>
  <subtitle>111</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://hanunimaas.com/"/>
  <updated>2017-11-21T21:31:04.767Z</updated>
  <id>http://hanunimaas.com/</id>
  
  <author>
    <name>Han</name>
    <email>h.jin@maastrichtuniversity.nl</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Astrophotography</title>
    <link href="http://hanunimaas.com/2017/11/21/Astrophotography/"/>
    <id>http://hanunimaas.com/2017/11/21/Astrophotography/</id>
    <published>2017-11-21T11:57:00.000Z</published>
    <updated>2017-11-21T21:31:04.767Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h2><p>First, here is a quick guide to astrophotography:</p><p><a href="http://www.lonelyspeck.com/wp-content/uploads/2014/01/nightscapes-quick-guide.pdf" target="_blank" rel="external">NIGHTSCAPES</a></p><p>A comprehensive website for astrophotography:</p><p><a href="https://www.lonelyspeck.com/astrophotography-101/" target="_blank" rel="external">Lonely Speck</a></p><h2 id="Place-to-trace-the-Milky-Way-in-Europe"><a href="#Place-to-trace-the-Milky-Way-in-Europe" class="headerlink" title="Place to trace the Milky Way in Europe"></a>Place to trace the Milky Way in Europe</h2><h3 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h3><ul><li>Open public space</li><li>High altitude</li><li>No air/light pollution</li><li>Best in summer from April to September, especially in June or July</li><li>Easy to approach, car rent available</li></ul><p>The requirements above, making the milky way clearly visible, are fulfilled by the following places:</p><h3 id="Recommendation-palce"><a href="#Recommendation-palce" class="headerlink" title="Recommendation palce"></a>Recommendation palce</h3><ul><li>Alqueva, Portugal</li></ul><p>A nice place around a lake with no light pollution at all, totally dark.</p><ul><li>Gran Canaria and Tenerife, Spain</li></ul><p>There’s a 3700-meter-high peak located in the middle of Tenerife island. <a href="https://www.volcanoteide.com/en/activities/stars" target="_blank" rel="external">Astronomic tour</a> is available on this island. This place is also famous by a Chinese writer, Sanmao, who spent her life for long on this island.</p><p>What if in winter? Try to take photos for the <a href="https://www.lonelyspeck.com/photographing-and-processing-the-constellation-orion-astrophotography-image-stacking-and-lrgb-processing/" target="_blank" rel="external">Constellation Orion</a>.</p><h2 id="Equipment"><a href="#Equipment" class="headerlink" title="Equipment:"></a>Equipment:</h2><p>Astrophotography pushes your equipment to its limits. Knowing these limits are the first step to creating great images. For the best results in your own images, familiarize yourself with the limits of your lens and camera. Test how long of a shutter duration you can use before the stars being to trail with your lens, practice visualizing your lens’s field of view before you even look through the viewfinder and find the suitable f/number that gives you the best balance of exposure and image quality. Once you’ve fully mastered the limits of your equipment, you are only limited by your imagination.</p><h3 id="Camera-Sony-α6300"><a href="#Camera-Sony-α6300" class="headerlink" title="Camera: Sony α6300"></a>Camera: Sony α6300</h3><p>This article shows the advantages and limits in taking astrophotograph by Sony α6000: <a href="https://www.lonelyspeck.com/sony-a6000-astrophotography-review/" target="_blank" rel="external">Sony α6000 Astrophotography Review</a></p><p>Taking astrophotograph photos by even a much more smaller sensor is also possible(see the article <a href="https://www.lonelyspeck.com/sony-rx100-series-astrophotography-review/" target="_blank" rel="external">RX100</a>), so there’s no reason to doubt the capability of your camera.</p><h3 id="Lens"><a href="#Lens" class="headerlink" title="Lens:"></a>Lens:</h3><p><a href="https://www.lonelyspeck.com/lenses-for-milky-way-photography/" target="_blank" rel="external">How to Pick a Lens for Milky Way Photography</a></p><ul><li><p>Sony E 16mm F2.8 + VCL-ECU</p><p>  This lens kit which equal to 12mm f2.8 on full frame, and 18mm f2.8 on APS-C frame, archieves 1,110 <a href="https://docs.google.com/spreadsheets/d/1p8FSEIaDd45i97NXFEZf4fnVOQ3ifA43ecJcuS0nCJ0/edit#gid=2" target="_blank" rel="external">Astro Lens Score</a>, representing the super imaging quality by aboving the criteria of 1000 for an excellent lens.</p></li><li><p>Sigma 30mm F1.4 DC DN | Contemporary</p><p>  On APS-C frame it is a standard lens with focal length at 45mm. Although the angle is not wide enough, the super clear aperture shows the possibility to captures enough light in a short time without let the stars start trailing. However, the right way to use the standard lens is to take more than one photo with at least 50 percent overlapped in between, and then merge the photos into a panorama picutre in post processing procedures.<br>  <a href="https://www.lonelyspeck.com/medium-format-astrophotography-with-panorama-stitching/" target="_blank" rel="external">Medium Format Astrophotograpy with Panorama Stitching</a></p></li></ul><h2 id="Setting-the-right-parameters"><a href="#Setting-the-right-parameters" class="headerlink" title="Setting the right parameters"></a>Setting the right parameters</h2><ul><li>Shoot in RAW</li><li>Zoom out</li><li>Manual focus</li><li>Manual exposure</li><li>Enable long exposure noise reduction</li><li>Enable the histogram</li><li>Use automatic white balance</li></ul><p>For the lens 16mm f2.8 with wide range adapter:</p><p>Of course first to fully open the aperture. Second, in order to get rid of the stars being to trail, the exposure time should be no more than 25s or 30s. Under this circumstance, what we still can adjust is the ISO. Evidences show that those camera with the ability of ISO invariance can take the photo in low ISO and then push the exposure in post processing. </p><ul><li>f/2.8</li><li>28s</li><li>ISO 3200</li></ul><p>The parameters above is extrapolated in stops from a “standard”(there’s no standard actual standard…) Milky Way exposure of: 30s, f/2.0, ISO 1600.</p><h2 id="Post-processing"><a href="#Post-processing" class="headerlink" title="Post processing"></a>Post processing</h2><p>Article: </p><ul><li><a href="https://www.lonelyspeck.com/how-to-process-milky-way-astrophotography-in-adobe-lightroom/" target="_blank" rel="external">Hwo to Process Milky Way Astrophotography in Adobe Lightroom</a></li><li><a href="https://www.lonelyspeck.com/stacking-noise-reduction/" target="_blank" rel="external">Noise Reduction with Image Stacking</a></li><li><a href="https://www.lonelyspeck.com/milky-way-exposure-stacking-with-manual-alignment-in-adobe-photoshop/" target="_blank" rel="external">Milky Way Exposure Stacking with manual Alighment in Adobe Photoshop</a></li><li><a href="https://www.lonelyspeck.com/removing-coma-aberration-in-adobe-photoshop-astrophotography-tutorial/" target="_blank" rel="external">Removing Coma Aberration in Adobe Photoshop: Astrophotography Tutorial</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;Tutorial&quot;&gt;&lt;a href=&quot;#Tutorial&quot; class=&quot;headerlink&quot; title=&quot;Tutorial&quot;&gt;&lt;/a&gt;Tutorial&lt;/h2&gt;&lt;p&gt;First, here is a quick guide
      
    
    </summary>
    
      <category term="Photography" scheme="http://hanunimaas.com/categories/Photography/"/>
    
    
  </entry>
  
  <entry>
    <title>《极致之美》——基础篇</title>
    <link href="http://hanunimaas.com/2017/11/19/yunman-photography-2/"/>
    <id>http://hanunimaas.com/2017/11/19/yunman-photography-2/</id>
    <published>2017-11-19T18:41:37.000Z</published>
    <updated>2017-11-21T12:04:58.012Z</updated>
    
    <content type="html"><![CDATA[<h2 id="摄影器材和设备"><a href="#摄影器材和设备" class="headerlink" title="摄影器材和设备"></a>摄影器材和设备</h2><h3 id="机身"><a href="#机身" class="headerlink" title="机身"></a>机身</h3><p>相对于大画幅和中画幅数码后背而言，135全画幅数码相机是画质、便携性和价格的完美结合点。另外，APS-C画幅具有体积小，价格相对低廉的特点，虽然高感相比全画幅差距较大，但也基本能满足多数业余爱好者的需要。<br><a id="more"></a></p><h3 id="镜头"><a href="#镜头" class="headerlink" title="镜头"></a>镜头</h3><p>变焦镜头比定焦镜头更方便，这一点在风光摄影中显得格外重要。</p><ol><li><p>超广角镜头（11~35mm）</p><p> 风光摄影师主力镜头，能收下更多场景，而且还能强调前景，建立视觉纵深感。</p></li><li><p>广角和中焦镜头（35~70mm）</p><p> 人文摄影师最喜欢的焦段。于风光摄影中，可以不用选择大口径光圈镜头，因为风光摄影通常只用f/8以下的光圈。</p></li><li><p>中长焦镜头（70mm以上）</p><p> 可简化画面，获得干净的构图。此外，长焦镜头能压缩空间，让画面显得比较平面抽象。此焦段常用于拍摄风光小品。考虑风光摄影常用光圈，体积，价格等因素，此类镜头依然不建议购买大口径光圈镜头。</p></li><li><p>特殊题材</p><p> 星空摄影需要大光圈（f/2.8以下）和超广角镜头。24mm有可能不够广，需要多张拼接。移轴镜头对建筑摄影师是不可或缺的，在风光摄影中可以避免透视变形，还能实现无变形拼图。</p></li></ol><h3 id="支撑系统和其他附件"><a href="#支撑系统和其他附件" class="headerlink" title="支撑系统和其他附件"></a>支撑系统和其他附件</h3><ul><li><p>三脚架</p><p>  三脚架的重要性不言而喻，这是每个严肃的风光摄影师绝不妥协的一环。运用好三脚架一方面可避免相机抖动，另一方面可帮助摄影师仔细研究构图，静下心来检查画面中的所有细节。</p></li><li><p>云台</p><p>  一个好的云台除稳定器材外，还有助于全景接片，球形云台操作起来比较快捷，使用率广。</p></li><li><p>快装板</p><p>  每一部机身和长焦镜头上都应该装有快装板，以方便更换机身镜头等。L形快装板可使竖排接片变得更方便。    </p></li><li><p>滤镜系统</p><p>  现代数码摄影多用曝光合成技术代替渐变镜。ND和CPL是目前还没法取代的两种滤镜。虽然多次曝光加堆栈技术可以在一定程度上模仿ND镜效果，但是局限性太大，拍摄浪花等动态场景没有ND效果好，后期处理也比较费力。</p></li></ul><p>此外还有摄影包，闪光灯等。</p><h3 id="户外装备"><a href="#户外装备" class="headerlink" title="户外装备"></a>户外装备</h3><p>GPS，卫星通讯设备，登山杖，头等，帐篷，睡袋，烹饪装备(MSR Pocket Rocket)，急救包，防熊喷雾等……</p><h3 id="摄影app"><a href="#摄影app" class="headerlink" title="摄影app"></a>摄影app</h3><ol><li><p>PlanIt! Pro: 可查看日出日落，月生月落，银河位置等等。还可以查看在地球上哪个位置的某一时刻会有物体挡住我们感兴趣的天体。</p><p> <a href="https://www.youtube.com/user/yingwentech/videos" target="_blank" rel="external">PlanIt!教学视频</a></p></li><li><p>DOF Calculator: 景深计算程序。</p></li><li><p>Northern Eye: 预测北极光。</p></li></ol><h3 id="计算机"><a href="#计算机" class="headerlink" title="计算机"></a>计算机</h3><p>在处理图像数据中，CPU和内存相对比较重要。此外，用NAS组磁盘阵列是确保数据安全的最好方式。任何时候，一定要保证图像数据至少有两份相同的拷贝位于不同的存储设备中。</p><p>MacOS用户可以考虑使用Time Machine备份软件。Windows用户可以使用Allway Sync。</p><p>此外，异地存储是大型公司一定会采用的策略，可应对火灾、自然灾害等意外。设备有价，照片无价。专业摄影师可考虑以此种方式备份和管理数据。</p><h2 id="数码摄影后期的基本概念"><a href="#数码摄影后期的基本概念" class="headerlink" title="数码摄影后期的基本概念"></a>数码摄影后期的基本概念</h2><h3 id="文件格式"><a href="#文件格式" class="headerlink" title="文件格式"></a>文件格式</h3><p>应以raw格式拍片，方便后期。raw格式可无损调整白平衡，在不过曝的情况下后期减少曝光并不会损害画质。虽然对raw文件增加曝光会增加噪点，但是对现代多数相机来说，特别是对白天光线好的场景增加曝光，噪点和画质劣化在可以接受的范围内。</p><p>jpeg格式：通常用于普通旅游者拍“到此一游”、抢时间出片的新闻记者、以及影室或照相馆中专业摄影师——在灯光精确控制的情况下，可直接jpeg出片。</p><p>tiff格式：无损压缩，16位存储，还可以包括图层。在raw文件解码后并进行进一步后期调整时首选的格式。</p><h3 id="色深"><a href="#色深" class="headerlink" title="色深"></a>色深</h3><p>使用16位RGB文件存储图像，以获得更多的色彩变化。特别是在天空、水面等色阶平滑过渡的地方，很多时候只要稍微加一点反差或者拉一点曲线就会出现色彩断层，此时16位文件可以有效缓解或避免这一问题。打印输出或用于网络浏览的时候，出于兼容性以及文件大小考虑，可改为8位RGB文件。</p><h3 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h3><p>解码raw文件，原厂软件最准，但功能有限。</p><p>一般的方法是使用Lightroom管理影像，对影像进行基本的调整。之后使用Photoshop进行复杂的后期调整。</p><h3 id="工作流"><a href="#工作流" class="headerlink" title="工作流"></a>工作流</h3><p>拍摄——导入计算机——Lightroom处理——Photoshop处理——缩小或插值放大输出</p><h3 id="ISO不变性"><a href="#ISO不变性" class="headerlink" title="ISO不变性"></a>ISO不变性</h3><p>如果一台相机提高ISO和后期提亮raw画面，对画质的损害如果几乎等同的话，称这台相机具有ISO不变性（ISOless或者ISOInvariance）。<br>现代数码相机，特别是索尼传感器的相机，比如索尼，尼康，宾得等，基本已具有ISO不变性。利用相机这个性质，可以在条件所限下（比如没有三脚架的情况下）先用尽量低的ISO和防抖进行手持拍摄，或者用低ISO保持画面高光不过曝，然后通过后期提亮画面暗部，结果通常要好于直接增加ISO进行拍摄所得到的效果。在拍摄星空和银河的时候该方法同样有用：星星具有丰富的颜色，用高ISO拍摄（ISO3200/6400, F/2.8, 30s）可能会过曝，前提欠曝后期提亮可避免这个问题。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;摄影器材和设备&quot;&gt;&lt;a href=&quot;#摄影器材和设备&quot; class=&quot;headerlink&quot; title=&quot;摄影器材和设备&quot;&gt;&lt;/a&gt;摄影器材和设备&lt;/h2&gt;&lt;h3 id=&quot;机身&quot;&gt;&lt;a href=&quot;#机身&quot; class=&quot;headerlink&quot; title=&quot;机身&quot;&gt;&lt;/a&gt;机身&lt;/h3&gt;&lt;p&gt;相对于大画幅和中画幅数码后背而言，135全画幅数码相机是画质、便携性和价格的完美结合点。另外，APS-C画幅具有体积小，价格相对低廉的特点，虽然高感相比全画幅差距较大，但也基本能满足多数业余爱好者的需要。&lt;br&gt;
    
    </summary>
    
      <category term="Photography" scheme="http://hanunimaas.com/categories/Photography/"/>
    
    
  </entry>
  
  <entry>
    <title>《极致之美》——思考篇</title>
    <link href="http://hanunimaas.com/2017/11/19/yunman-photography-1/"/>
    <id>http://hanunimaas.com/2017/11/19/yunman-photography-1/</id>
    <published>2017-11-19T17:32:52.000Z</published>
    <updated>2017-11-20T09:17:52.026Z</updated>
    
    <content type="html"><![CDATA[<h2 id="摄影中的主观创造"><a href="#摄影中的主观创造" class="headerlink" title="摄影中的主观创造"></a>摄影中的主观创造</h2><p>一幅照片，展示的是摄影师想让你看到的角度。这个时间和空间的截片，不是简单地对真实世界的记录和如明信片的景点介绍，而是情绪的表达，是摄影师心中的风景。它强调的是按下快门那一瞬间最能打动摄影师内心的景物，也是摄影师的创造力和艺术沉淀的综合体现。拍摄显而易见的客观景物本身只是记录和搬运美景，发现摄影师独特的主观视角才是艺术创作。<br><a id="more"></a></p><p>那些很容易到达的地方，比如已经修好的观景台等，你在这里拍摄，别人也可以很容易在这里拍摄。此为旅游者视角，这本身并没有什么错。人们在一个地方修观景台的原因，多半是因为从那个角度看风景的角度最佳，或者该地点较容易到达。一个摄影师的作品集里有一些这样的“经典构图”是完全合理的。然而，摄影师要突破常规，需要多观察，多走动，去别人不曾到过的地方，以别人不曾观察到的角度拍摄，这样才可以拍摄出属于自己的照片。</p><blockquote><p>而世之奇伟、瑰怪，非常之观，常在于险远，而人之所罕至焉，故非有志者不能至也。</p></blockquote><p>——《游褒禅山记》</p><p>还有一些人错误的认为，他们没有拍到好照片，是因为自己的相机不够好，或者因为自己没有机会去这些地方，他们把问题都归结于客观原因。其实这是错误的。虽然器材对于摄影来说确实是重要的一环，但拿着好器材拍出烂照片的例子比比皆是。好的器材只有在高手的手中才能彻底发挥它的优势。一把顶级的小提琴，放在不懂音乐的人的手中，拉出来的声音注定只能是噪音。此外，陌生以及壮丽的场景，确实能激发人的观察力和创作欲。然而，世上那些著名景点每天都有成千上万人去游览，每人用手机随便一拍就应该是大片，可现实并不都是这样。比到达一个绝美地方更重要的是，我们必须有一双发现美的眼睛，以及展现这些美的技术手段。</p><p>英国著名摄影师David Norton在他的《等待光纤》一书中说道：</p><blockquote><p>这种广为流传的错误想法是一个很容易掉进去的陷阱——相信如果自己随便到了某个壮丽的地方就足够了，在哪里拍摄大片就像从树上摘下成熟的果实那样简单。但事实上，真正独特、引人入胜、令人惊叹、细致入微和惟妙惟肖的照片是“造”出来的，而不是“照”出来的。他们是思维的产物，是通过坚持不懈的努力和熟练的技术将想像变为现实。</p></blockquote><h2 id="风光摄影的几个阶段"><a href="#风光摄影的几个阶段" class="headerlink" title="风光摄影的几个阶段"></a>风光摄影的几个阶段</h2><ol><li>技术上过关，曝光准确，对焦清晰。</li><li>讲究构图和色彩。</li><li>去到风景名胜，等待光线，模仿经典构图。</li></ol><p>若遇到绝佳天气，可能还会拍得比原版还好看。对绝大多数摄影爱好者，甚至很多专业摄影师来说，第三条就是最高境界了。</p><p>在经典机位模仿前人作品是很好的学习机会，几乎每个人都会经历这个阶段。而摄影师应追求进一步的提高，在作品里表现出自己个人的视角、情感和艺术风格，拍摄属于摄影师“自己”的照片。<strong>独特和新颖，是大多数风光摄影师们所追求的最高阶段。</strong></p><h2 id="小景物，大风光"><a href="#小景物，大风光" class="headerlink" title="小景物，大风光"></a>小景物，大风光</h2><p>当代主流风光摄影主要表现自然界壮丽、宏伟、辽阔的大风光。运用广角镜头，重视前景微小细节，结合近景小品和大风光的思路，称为“小景物，大风光”。拍摄这样的照片需要：</p><ul><li>敏锐的观察力和创造力</li><li>很强的组织画面元素的功力</li><li>技术上的景深合成</li></ul><p>超广角图像中常见的过渡：</p><ul><li>前景冷色调与远景暖色调（落日）</li><li>前景低饱和与远景高饱和</li><li>前景暗色调与远景亮色调</li><li>前景清晰远景模糊</li></ul><p>运用好画面中的过渡，可塑造影像强烈的三维透视感。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><blockquote><p>我们不只是用相机拍照，我们带到摄影作品中去的是所有我们读过的书、看过的电影、听过的音乐、走过的路和爱过的人。</p></blockquote><p>摄影离不开客观现实，但一幅优秀的作品中更包含了摄影师的主观创造。任何强调客观，忽略主观的想法都有失偏颇。<strong>我们拍摄的是客观风景，但反映出的其实是摄影师自己的主观内心。</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;摄影中的主观创造&quot;&gt;&lt;a href=&quot;#摄影中的主观创造&quot; class=&quot;headerlink&quot; title=&quot;摄影中的主观创造&quot;&gt;&lt;/a&gt;摄影中的主观创造&lt;/h2&gt;&lt;p&gt;一幅照片，展示的是摄影师想让你看到的角度。这个时间和空间的截片，不是简单地对真实世界的记录和如明信片的景点介绍，而是情绪的表达，是摄影师心中的风景。它强调的是按下快门那一瞬间最能打动摄影师内心的景物，也是摄影师的创造力和艺术沉淀的综合体现。拍摄显而易见的客观景物本身只是记录和搬运美景，发现摄影师独特的主观视角才是艺术创作。&lt;br&gt;
    
    </summary>
    
      <category term="Photography" scheme="http://hanunimaas.com/categories/Photography/"/>
    
    
  </entry>
  
  <entry>
    <title>R语言学习（三）矩阵</title>
    <link href="http://hanunimaas.com/2017/11/15/R-programming-3/"/>
    <id>http://hanunimaas.com/2017/11/15/R-programming-3/</id>
    <published>2017-11-15T19:23:41.017Z</published>
    <updated>2017-11-20T10:46:07.550Z</updated>
    
    <content type="html"><![CDATA[<p>第三章——矩阵</p><p>矩阵是一种特殊的向量，包含两个附加的属性：行数和列数。矩阵是数组的特例，数组可以大于两维，而矩阵只有两维。<br><a id="more"></a></p><h2 id="创建矩阵"><a href="#创建矩阵" class="headerlink" title="创建矩阵"></a>创建矩阵</h2><p>矩阵相当于按列存储一个向量，但是实际也存在矩阵类(matrix class)。<br>其中nrow或者ncol只给出一个参数也可以创建向量。</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; y &lt;- matrix(c(<span class="number">1</span>:<span class="number">4</span>), nrow = <span class="number">2</span>, ncol = <span class="number">2</span>)</div><div class="line">&gt; y</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">3</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">4</span></div><div class="line">&gt; which(y&gt;<span class="number">2</span>)<span class="comment">#矩阵的按列存储性质</span></div><div class="line">[<span class="number">1</span>] <span class="number">3</span> <span class="number">4</span></div><div class="line">&gt; class(y)</div><div class="line">[<span class="number">1</span>] <span class="string">"matrix"</span></div><div class="line">&gt; attributes(y)</div><div class="line">$dim</div><div class="line">[<span class="number">1</span>] <span class="number">2</span> <span class="number">2</span></div></pre></td></tr></table></figure><p>或者先创建矩阵：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; y &lt;- matrix(nrow = <span class="number">2</span>, ncol = <span class="number">2</span>)</div></pre></td></tr></table></figure><p>再为每一个元素赋值：<code>y[1,1] &lt;- 1</code>…</p><p>也可以对矩阵的子矩阵进行赋值，假设y行数大于3：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">y[c(<span class="number">1</span>,<span class="number">3</span>),] &lt;- matrix(c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">12</span>), nrow = <span class="number">2</span>)</div></pre></td></tr></table></figure><p>此外，还可以用<code>rownames()</code>和<code>colnames()</code>给矩阵的行和列命名：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; colnames(y) = c(<span class="string">'a'</span>,<span class="string">'b'</span>)</div><div class="line">&gt; y</div><div class="line">     a b</div><div class="line">[<span class="number">1</span>,] <span class="number">1</span> <span class="number">3</span></div><div class="line">[<span class="number">2</span>,] <span class="number">2</span> <span class="number">4</span></div></pre></td></tr></table></figure><p>用<code>nrow()</code>和<code>ncol()</code>访问矩阵的行数和列数。</p><h2 id="矩阵运算"><a href="#矩阵运算" class="headerlink" title="矩阵运算"></a>矩阵运算</h2><h3 id="加减乘除"><a href="#加减乘除" class="headerlink" title="加减乘除"></a>加减乘除</h3><p>矩阵乘法（线性代数意义上的乘法）</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; y %*% y</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">7</span>   <span class="number">15</span></div><div class="line">[<span class="number">2</span>,]   <span class="number">10</span>   <span class="number">22</span></div></pre></td></tr></table></figure><p><code>y*3</code>代表矩阵每个元素都乘以3，而<code>y+y</code>代表矩阵每个位置对应的元素相加。</p><h3 id="矩阵元素筛选"><a href="#矩阵元素筛选" class="headerlink" title="矩阵元素筛选"></a>矩阵元素筛选</h3><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- matrix(c(<span class="number">1</span>:<span class="number">6</span>), nrow = <span class="number">3</span>)</div><div class="line">&gt; x</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">4</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">5</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">6</span></div><div class="line">&gt; x[x[,<span class="number">2</span>] &gt;= <span class="number">5</span>,]</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">2</span>    <span class="number">5</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">3</span>    <span class="number">6</span></div><div class="line">&gt;</div></pre></td></tr></table></figure><p>先选出矩阵第二列大于5的元素，然后再将布尔向量应用到原矩阵中，选择出第2和3行。</p><p>另外一种选择方法：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x[x[,<span class="number">1</span>] &gt; <span class="number">1</span> &amp; x[,<span class="number">2</span>] &gt; <span class="number">5</span>,]</div><div class="line">[<span class="number">1</span>] <span class="number">3</span> <span class="number">6</span></div><div class="line">&gt; x[,<span class="number">1</span>]&gt;<span class="number">1</span></div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span></div><div class="line">&gt; x[,<span class="number">2</span>] &gt; <span class="number">5</span></div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span></div><div class="line">&gt; x[,<span class="number">1</span>] &gt; <span class="number">1</span> &amp; x[,<span class="number">2</span>] &gt; <span class="number">5</span></div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span></div></pre></td></tr></table></figure><p>用“与”运算符<code>&amp;</code>从矩阵中选出了第一列大于1并且第二列大于5的部分。</p><p>要注意的是，如果只从矩阵提取一行，会自动变成向量。若仍想保留矩阵属性，需要使用<code>drop</code>参数。</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; dim(x)</div><div class="line">[<span class="number">1</span>] <span class="number">3</span> <span class="number">2</span></div><div class="line">&gt; dim(x[,<span class="number">1</span>])<span class="comment">#此时已经成为向量，没有dim属性</span></div><div class="line"><span class="literal">NULL</span></div><div class="line">&gt; dim(x[,<span class="number">1</span>, drop = <span class="literal">F</span>])</div><div class="line">[<span class="number">1</span>] <span class="number">3</span> <span class="number">1</span></div></pre></td></tr></table></figure><p>也可以用<code>as.matrix()</code>将向量转化为矩阵。</p><h2 id="返回矩阵某元素的位置"><a href="#返回矩阵某元素的位置" class="headerlink" title="返回矩阵某元素的位置"></a>返回矩阵某元素的位置</h2><p>使用<code>row()</code>和<code>col()</code>函数查看矩阵中某元素的位置。在某些特殊情况下会用到，比如创建对称矩阵时：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; m &lt;- matrix(nrow = <span class="number">4</span>, ncol = <span class="number">4</span>)</div><div class="line">&gt; m &lt;- ifelse(row(m) == col(m), <span class="number">1</span>, <span class="number">0.2</span>)</div><div class="line">&gt; m</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,]  <span class="number">1.0</span>  <span class="number">0.2</span>  <span class="number">0.2</span>  <span class="number">0.2</span></div><div class="line">[<span class="number">2</span>,]  <span class="number">0.2</span>  <span class="number">1.0</span>  <span class="number">0.2</span>  <span class="number">0.2</span></div><div class="line">[<span class="number">3</span>,]  <span class="number">0.2</span>  <span class="number">0.2</span>  <span class="number">1.0</span>  <span class="number">0.2</span></div><div class="line">[<span class="number">4</span>,]  <span class="number">0.2</span>  <span class="number">0.2</span>  <span class="number">0.2</span>  <span class="number">1.0</span></div><div class="line">&gt; row(m)</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">2</span>    <span class="number">2</span>    <span class="number">2</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">3</span>    <span class="number">3</span>    <span class="number">3</span></div></pre></td></tr></table></figure><p>可以使对角线元素为1，其余元素为0.2。</p><h2 id="apply函数"><a href="#apply函数" class="headerlink" title="apply函数"></a><code>apply</code>函数</h2><p><code>apply(m, dimcode, f, fargs)</code></p><ul><li><code>m</code>为矩阵。</li><li><code>dimcode = 1</code>按行应用函数，<code>dimcode = 2</code>按列应用函数。</li><li><code>f</code>是函数。</li><li><code>fargs</code>是函数的参数。<br>如果所调用的函数的返回值是一个包含k个元素的向量，那么<code>apply()</code>的结果就有k行。有时会引起矩阵的行列数的变化，需要运行后dim检查一下结果。</li></ul><h2 id="插入或删除矩阵的行或列"><a href="#插入或删除矩阵的行或列" class="headerlink" title="插入或删除矩阵的行或列"></a>插入或删除矩阵的行或列</h2><p>向量直接使用<code>c()</code>插入：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x = c(<span class="number">1</span>:<span class="number">7</span>)</div><div class="line">&gt; x = c(x[<span class="number">1</span>:<span class="number">3</span>], <span class="number">20</span>, x[<span class="number">4</span>:<span class="number">7</span>])</div><div class="line">&gt; x</div><div class="line">[<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span> <span class="number">20</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span></div></pre></td></tr></table></figure><p>矩阵使用<code>cbind()</code>和<code>rbind()</code>插入列和行。<br>然而通过这两个函数若用于循环创建矩阵比较耗时，所以最好的办法是先定义好一个大矩阵然后再循环赋值。</p><p>想要删除矩阵的行或列，可以通过重新索引矩阵某一部分的方式，或者比如使用<code>c(-1)</code>索引行或列今儿删除矩阵的第一行或列。</p><h2 id="高维数组"><a href="#高维数组" class="headerlink" title="高维数组"></a>高维数组</h2><p>一个简单的例子，通过两个矩阵组成高维数组：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- matrix(c(<span class="number">1</span>:<span class="number">12</span>), nrow = <span class="number">3</span>)</div><div class="line">&gt; y &lt;- matrix(c(<span class="number">24</span>:<span class="number">13</span>), nrow = <span class="number">3</span>)</div><div class="line">&gt; x</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">4</span>    <span class="number">7</span>   <span class="number">10</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span>   <span class="number">11</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span>   <span class="number">12</span></div><div class="line">&gt; y</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,]   <span class="number">24</span>   <span class="number">21</span>   <span class="number">18</span>   <span class="number">15</span></div><div class="line">[<span class="number">2</span>,]   <span class="number">23</span>   <span class="number">20</span>   <span class="number">17</span>   <span class="number">14</span></div><div class="line">[<span class="number">3</span>,]   <span class="number">22</span>   <span class="number">19</span>   <span class="number">16</span>   <span class="number">13</span></div><div class="line">&gt; tests &lt;- array(data = c(x, y), dim = c(<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>))<span class="comment">#创建高维数组，其中dim中的2代表数据共有两层(两个矩阵组成)</span></div><div class="line">&gt; dim(tests)<span class="comment">#维度由三个元素构成</span></div><div class="line">[<span class="number">1</span>] <span class="number">3</span> <span class="number">4</span> <span class="number">2</span></div><div class="line">&gt; tests</div><div class="line">, , <span class="number">1</span></div><div class="line"></div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">4</span>    <span class="number">7</span>   <span class="number">10</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span>   <span class="number">11</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span>   <span class="number">12</span></div><div class="line"></div><div class="line">, , <span class="number">2</span></div><div class="line"></div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,]   <span class="number">24</span>   <span class="number">21</span>   <span class="number">18</span>   <span class="number">15</span></div><div class="line">[<span class="number">2</span>,]   <span class="number">23</span>   <span class="number">20</span>   <span class="number">17</span>   <span class="number">14</span></div><div class="line">[<span class="number">3</span>,]   <span class="number">22</span>   <span class="number">19</span>   <span class="number">16</span>   <span class="number">13</span></div><div class="line"></div><div class="line">&gt; tests[<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]<span class="comment">#返回第一个矩阵中的第三行第二列的元素</span></div><div class="line">[<span class="number">1</span>] <span class="number">6</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;第三章——矩阵&lt;/p&gt;
&lt;p&gt;矩阵是一种特殊的向量，包含两个附加的属性：行数和列数。矩阵是数组的特例，数组可以大于两维，而矩阵只有两维。&lt;br&gt;
    
    </summary>
    
      <category term="R programming" scheme="http://hanunimaas.com/categories/R-programming/"/>
    
    
  </entry>
  
  <entry>
    <title>R语言学习（二）向量</title>
    <link href="http://hanunimaas.com/2017/11/01/R-programming-2/"/>
    <id>http://hanunimaas.com/2017/11/01/R-programming-2/</id>
    <published>2017-11-01T20:49:12.000Z</published>
    <updated>2017-11-20T10:47:25.884Z</updated>
    
    <content type="html"><![CDATA[<p>第二章——向量</p><p>向量是R语言中最基础也是最常用的数据结构。<br><a id="more"></a></p><h2 id="向量性质"><a href="#向量性质" class="headerlink" title="向量性质"></a>向量性质</h2><p>可以用<code>c()</code>添加和合并向量。<br>矩阵为按列存储的向量。<br>尽量避免使用<code>for(i in 1:inlength(x))</code>在循环中，因为<code>length(x)</code>有可能为0：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- c()</div><div class="line">&gt; x</div><div class="line"><span class="literal">NULL</span></div><div class="line">&gt; <span class="number">1</span>:length(x)</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">0</span></div></pre></td></tr></table></figure><h2 id="声明向量"><a href="#声明向量" class="headerlink" title="声明向量"></a>声明向量</h2><p>向量不需要声明，可以直接赋值。<br>先创建向量再赋值的例子：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; y &lt;- vector(length=<span class="number">2</span>)</div><div class="line">&gt; y</div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span> <span class="literal">FALSE</span></div><div class="line">&gt; y[<span class="number">1</span>] &lt;- <span class="number">5</span></div><div class="line">&gt; y[<span class="number">2</span>] &lt;- <span class="number">12</span></div><div class="line">&gt; y</div><div class="line">[<span class="number">1</span>]  <span class="number">5</span> <span class="number">12</span></div></pre></td></tr></table></figure><h2 id="循环补齐"><a href="#循环补齐" class="headerlink" title="循环补齐"></a>循环补齐</h2><p>在对两个向量运算时，如果要求这两个向量具有相同长度，则较短的向量会被循环补齐:</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>) + c(<span class="number">6</span>,<span class="number">0</span>,<span class="number">9</span>,<span class="number">20</span>,<span class="number">22</span>)</div><div class="line">[<span class="number">1</span>]  <span class="number">7</span>  <span class="number">2</span> <span class="number">13</span> <span class="number">21</span> <span class="number">24</span></div><div class="line">Warning message:</div><div class="line">In c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>) + c(<span class="number">6</span>, <span class="number">0</span>, <span class="number">9</span>, <span class="number">20</span>, <span class="number">22</span>) :</div><div class="line">  longer object length is not a multiple of shorter object length</div></pre></td></tr></table></figure><p>等同于<code>c(1,2,4,1,2) + c(6,0,9,20,22)</code></p><h2 id="常用向量运算"><a href="#常用向量运算" class="headerlink" title="常用向量运算"></a>常用向量运算</h2><p><code>*</code>为元素与元素相乘:</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>) * c(<span class="number">5</span>,<span class="number">0</span>,-<span class="number">1</span>)</div><div class="line">[<span class="number">1</span>]  <span class="number">5</span>  <span class="number">0</span> -<span class="number">4</span></div></pre></td></tr></table></figure><p>负号用于删除元素，删除最后一个元素用<code>length()</code>:</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; z &lt;- c(<span class="number">5</span>,<span class="number">12</span>,<span class="number">13</span>)</div><div class="line">&gt; z[-<span class="number">1</span>]</div><div class="line">[<span class="number">1</span>] <span class="number">12</span> <span class="number">13</span></div><div class="line">&gt; z[-<span class="number">1</span>:-<span class="number">2</span>]</div><div class="line">[<span class="number">1</span>] <span class="number">13</span></div><div class="line">&gt; z[<span class="number">1</span>:(length(z)-<span class="number">1</span>)]</div><div class="line">[<span class="number">1</span>]  <span class="number">5</span> <span class="number">12</span></div></pre></td></tr></table></figure><p>运算符优先级问题:</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; <span class="number">1</span>:<span class="number">2</span>-<span class="number">1</span></div><div class="line">[<span class="number">1</span>] <span class="number">0</span> <span class="number">1</span></div><div class="line">&gt; <span class="number">1</span>:(<span class="number">2</span>-<span class="number">1</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">1</span></div></pre></td></tr></table></figure><p><code>seq()</code>创建向量:</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; seq(from=<span class="number">12</span>, to=<span class="number">30</span>, by=<span class="number">3</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">12</span> <span class="number">15</span> <span class="number">18</span> <span class="number">21</span> <span class="number">24</span> <span class="number">27</span> <span class="number">30</span></div><div class="line">&gt; seq(from=<span class="number">1.1</span>, to=<span class="number">2</span>, length=<span class="number">10</span>)</div><div class="line"> [<span class="number">1</span>] <span class="number">1.1</span> <span class="number">1.2</span> <span class="number">1.3</span> <span class="number">1.4</span> <span class="number">1.5</span> <span class="number">1.6</span> <span class="number">1.7</span> <span class="number">1.8</span> <span class="number">1.9</span> <span class="number">2.0</span></div></pre></td></tr></table></figure><p><code>rep()</code>创建向量:</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; rep(<span class="number">1</span>:<span class="number">3</span>,<span class="number">2</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></div><div class="line">&gt; rep(<span class="number">1</span>:<span class="number">3</span>,each=<span class="number">2</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">3</span> <span class="number">3</span></div></pre></td></tr></table></figure><h2 id="使用all-和any"><a href="#使用all-和any" class="headerlink" title="使用all()和any()"></a>使用<code>all()</code>和<code>any()</code></h2><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- <span class="number">1</span>:<span class="number">10</span></div><div class="line">&gt; any(x&gt;<span class="number">8</span>)</div><div class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></div><div class="line">&gt; all(x&gt;<span class="number">8</span>)</div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span></div></pre></td></tr></table></figure><p>计算向量累积和<code>cumsum()</code>:</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; cumsum(<span class="number">1</span>:<span class="number">10</span>)</div><div class="line"> [<span class="number">1</span>]  <span class="number">1</span>  <span class="number">3</span>  <span class="number">6</span> <span class="number">10</span> <span class="number">15</span> <span class="number">21</span> <span class="number">28</span> <span class="number">36</span> <span class="number">45</span> <span class="number">55</span></div></pre></td></tr></table></figure><h2 id="向量化运算符"><a href="#向量化运算符" class="headerlink" title="向量化运算符"></a>向量化运算符</h2><p>假设我们希望对向量x中每一个元素使用函数f()，很多情况下对x调用f()就可以完成。提高R代码执速度的有效方法之一是向量化，这意味着应用到向量上的函数实际上应用在其每一个元素上:</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; w &lt;- <span class="keyword">function</span>(x) <span class="keyword">return</span>(x+<span class="number">1</span>)</div><div class="line">&gt; w(c(<span class="number">5</span>,<span class="number">2</span>,<span class="number">8</span>))</div><div class="line">[<span class="number">1</span>] <span class="number">6</span> <span class="number">3</span> <span class="number">9</span></div><div class="line">&gt; sqrt(<span class="number">1</span>:<span class="number">8</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">1.000000</span> <span class="number">1.414214</span> <span class="number">1.732051</span> <span class="number">2.000000</span> <span class="number">2.236068</span> <span class="number">2.449490</span> <span class="number">2.645751</span> <span class="number">2.828427</span></div></pre></td></tr></table></figure><p><code>sapply(x,f)</code>对x的每一个元素使用函数f()，并将结果转化为矩阵:</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; z12 &lt;- <span class="keyword">function</span>(z) <span class="keyword">return</span>(c(z,z^<span class="number">2</span>))</div><div class="line">&gt; sapply(<span class="number">1</span>:<span class="number">8</span>, z12)</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>] [,<span class="number">5</span>] [,<span class="number">6</span>] [,<span class="number">7</span>] [,<span class="number">8</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span>    <span class="number">5</span>    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">1</span>    <span class="number">4</span>    <span class="number">9</span>   <span class="number">16</span>   <span class="number">25</span>   <span class="number">36</span>   <span class="number">49</span>   <span class="number">64</span></div></pre></td></tr></table></figure><h2 id="缺失值NA与NULL"><a href="#缺失值NA与NULL" class="headerlink" title="缺失值NA与NULL"></a>缺失值NA与NULL</h2><p>NA代表存在，但是缺失；NULL代表空，不存在:</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- c(<span class="number">1</span>,<span class="literal">NA</span>,<span class="number">3</span>)</div><div class="line">&gt; mean(x)</div><div class="line">[<span class="number">1</span>] <span class="literal">NA</span></div><div class="line">&gt; mean(x, na.rm=<span class="literal">T</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">2</span></div><div class="line">&gt; x &lt;- c(<span class="number">1</span>,<span class="literal">NULL</span>,<span class="number">3</span>)</div><div class="line">&gt; mean(x)</div><div class="line">[<span class="number">1</span>] <span class="number">2</span></div><div class="line">&gt; x</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">3</span></div><div class="line">&gt; mode(x[<span class="number">1</span>])</div><div class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></div><div class="line">&gt; mode(x[<span class="number">2</span>])</div><div class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></div></pre></td></tr></table></figure><p>NULL可以初始化向量：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; z &lt;- <span class="literal">NULL</span></div><div class="line">&gt; c(z,<span class="number">3</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">3</span></div><div class="line">&gt; z &lt;- <span class="literal">NA</span></div><div class="line">&gt; c(z,<span class="number">3</span>)</div><div class="line">[<span class="number">1</span>] <span class="literal">NA</span>  <span class="number">3</span></div></pre></td></tr></table></figure><p>注意：NULL是R的一种特殊对象，它没有模式。</p><h2 id="筛选"><a href="#筛选" class="headerlink" title="筛选"></a>筛选</h2><h3 id="使用运算符-比如-gt-返回的布尔值向量对向量元素进行筛选"><a href="#使用运算符-比如-gt-返回的布尔值向量对向量元素进行筛选" class="headerlink" title="使用运算符(比如&gt;)返回的布尔值向量对向量元素进行筛选"></a>使用运算符(比如<code>&gt;</code>)返回的布尔值向量对向量元素进行筛选</h3><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; z &lt;- c(<span class="number">5</span>,<span class="number">2</span>,-<span class="number">3</span>,<span class="number">8</span>)</div><div class="line">&gt; j &lt;- z*z &gt; <span class="number">8</span></div><div class="line">&gt; j</div><div class="line">[<span class="number">1</span>]  <span class="literal">TRUE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span></div><div class="line">&gt; y &lt;- c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">30</span>,<span class="number">5</span>)</div><div class="line">&gt; y[j]</div><div class="line">[<span class="number">1</span>]  <span class="number">1</span> <span class="number">30</span>  <span class="number">5</span></div></pre></td></tr></table></figure><p>另一个例子：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- c(<span class="number">1</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">20</span>)</div><div class="line">&gt; x[x &gt; <span class="number">3</span>] &lt;- <span class="number">0</span></div><div class="line">&gt; x</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">3</span> <span class="number">0</span> <span class="number">2</span> <span class="number">0</span></div></pre></td></tr></table></figure><h3 id="使用subset-函数进行筛选"><a href="#使用subset-函数进行筛选" class="headerlink" title="使用subset()函数进行筛选"></a>使用<code>subset()</code>函数进行筛选</h3><p>可以处理缺失值NA：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- c(<span class="number">6</span>,<span class="number">1</span>:<span class="number">3</span>,<span class="literal">NA</span>,<span class="number">12</span>)</div><div class="line">&gt; x[x &gt; <span class="number">5</span>]</div><div class="line">[<span class="number">1</span>]  <span class="number">6</span> <span class="literal">NA</span> <span class="number">12</span></div><div class="line">&gt; subset(x, x &gt; <span class="number">5</span>)</div><div class="line">[<span class="number">1</span>]  <span class="number">6</span> <span class="number">12</span></div></pre></td></tr></table></figure><h3 id="使用which-函数找到满足条件元素所在的位置"><a href="#使用which-函数找到满足条件元素所在的位置" class="headerlink" title="使用which()函数找到满足条件元素所在的位置"></a>使用<code>which()</code>函数找到满足条件元素所在的位置</h3><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; z &lt;- c(<span class="number">5</span>,<span class="number">2</span>,-<span class="number">3</span>,<span class="number">8</span>)</div><div class="line">&gt; which(z*z &gt;<span class="number">8</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">3</span> <span class="number">4</span></div><div class="line">&gt; which(z*z &gt;<span class="number">8</span>)[<span class="number">1</span>]<span class="comment">#找到满足条件元素首次出现的位置</span></div><div class="line">[<span class="number">1</span>] <span class="number">1</span></div></pre></td></tr></table></figure><h2 id="向量化的ifelse-函数"><a href="#向量化的ifelse-函数" class="headerlink" title="向量化的ifelse()函数"></a>向量化的<code>ifelse()</code>函数</h2><p><code>ifelse(b,u,v)</code><br>如果<code>b[i]</code>为真，则返回值的第i个元素为<code>u[i]</code>，否则为<code>v[i]</code>：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- c(<span class="number">5</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">12</span>)</div><div class="line">&gt; ifelse(x &gt; <span class="number">6</span>, <span class="number">2</span>*x, <span class="number">3</span>*x)</div><div class="line">[<span class="number">1</span>] <span class="number">15</span>  <span class="number">6</span> <span class="number">18</span> <span class="number">24</span></div></pre></td></tr></table></figure><p><code>diff()</code>函数比较向量每个元素和后面的元素之差，</p><p><code>sign()</code>函数将向量中的数值转化为1、0或者-1：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; u &lt;- c(<span class="number">1</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>)</div><div class="line">&gt; diff(u)</div><div class="line">[<span class="number">1</span>]  <span class="number">5</span>  <span class="number">1</span> -<span class="number">5</span>  <span class="number">1</span>  <span class="number">2</span></div><div class="line">&gt; sign(diff(u))</div><div class="line">[<span class="number">1</span>]  <span class="number">1</span>  <span class="number">1</span> -<span class="number">1</span>  <span class="number">1</span>  <span class="number">1</span></div></pre></td></tr></table></figure><h2 id="测试向量相等"><a href="#测试向量相等" class="headerlink" title="测试向量相等"></a>测试向量相等</h2><p>使用<code>all()</code>函数：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- <span class="number">1</span>:<span class="number">3</span></div><div class="line">&gt; y &lt;- c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>)</div><div class="line">&gt; x == y</div><div class="line">[<span class="number">1</span>]  <span class="literal">TRUE</span>  <span class="literal">TRUE</span> <span class="literal">FALSE</span></div><div class="line">&gt; all(x == y)</div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span></div></pre></td></tr></table></figure><p>符号<code>:</code>产生的是整数，而<code>c()</code>产生的是浮点数，<code>identical(x,y)</code>判断两个对象是否完全一样：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- <span class="number">1</span>:<span class="number">2</span></div><div class="line">&gt; y &lt;- c(<span class="number">1</span>,<span class="number">2</span>)</div><div class="line">&gt; all(x == y)</div><div class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></div><div class="line">&gt; identical(x,y)</div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span></div><div class="line">&gt; typeof(x)</div><div class="line">[<span class="number">1</span>] <span class="string">"integer"</span></div><div class="line">&gt; typeof(y)</div><div class="line">[<span class="number">1</span>] <span class="string">"double"</span></div></pre></td></tr></table></figure><h2 id="向量元素的名称"><a href="#向量元素的名称" class="headerlink" title="向量元素的名称"></a>向量元素的名称</h2><p>使用<code>name()</code>给向量中的元素命名，或查询向量元素名称：</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- <span class="number">1</span>:<span class="number">3</span></div><div class="line">&gt; x</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></div><div class="line">&gt; names(x) &lt;- c(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"ab"</span>)</div><div class="line">&gt; names(x)</div><div class="line">[<span class="number">1</span>] <span class="string">"a"</span>  <span class="string">"b"</span>  <span class="string">"ab"</span></div><div class="line">&gt; x</div><div class="line"> a  b ab </div><div class="line"> <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span> </div><div class="line"> &gt; x[<span class="string">"b"</span>]</div><div class="line">b </div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure><h2 id="c-的强制类型转换"><a href="#c-的强制类型转换" class="headerlink" title="c()的强制类型转换"></a><code>c()</code>的强制类型转换</h2><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; c(<span class="number">5</span>,<span class="number">2</span>,<span class="string">"abc"</span>)</div><div class="line">[<span class="number">1</span>] <span class="string">"5"</span>   <span class="string">"2"</span>   <span class="string">"abc"</span></div><div class="line">&gt; c(<span class="number">5</span>,<span class="number">2</span>,c(<span class="number">1.5</span>,<span class="number">6</span>))</div><div class="line">[<span class="number">1</span>] <span class="number">5.0</span> <span class="number">2.0</span> <span class="number">1.5</span> <span class="number">6.0</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;第二章——向量&lt;/p&gt;
&lt;p&gt;向量是R语言中最基础也是最常用的数据结构。&lt;br&gt;
    
    </summary>
    
      <category term="R programming" scheme="http://hanunimaas.com/categories/R-programming/"/>
    
    
  </entry>
  
  <entry>
    <title>Running Lemon-Tree on Arg1.CD68-correlated Modules</title>
    <link href="http://hanunimaas.com/2017/10/26/run-lemon-tree/"/>
    <id>http://hanunimaas.com/2017/10/26/run-lemon-tree/</id>
    <published>2017-10-26T13:30:05.000Z</published>
    <updated>2017-11-20T10:20:35.167Z</updated>
    
    <content type="html"><![CDATA[<p>This is to show how to run Lemon-Tree algorithm on our dataset.<br><a id="more"></a></p><h2 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h2><ul><li>For WGCNA: transcriptomics data with stable patients, same classification as Jan’s version.</li><li>For Lemon-Tree: transcriptomics data with 7 modules on all patients. See the file arg1.cd68.stable.pdf.</li><li>Modules: indianred3, lightslateblue, brown4, mediumpurple4, orangered1, yellowgreen, firebrick4.</li><li>Preprocess: Scale the feature to standard normal distribution before running the Lemon-Tree program.</li></ul><h2 id="Procedure"><a href="#Procedure" class="headerlink" title="Procedure"></a>Procedure</h2><ol><li>From WGCNA results on stable patients, select 7 interesting modules (5 positive correlation, 2 negative correlation to Arg1.CD68) including 1645 unique genes.</li><li>From 1645 genes select candidate regulators according to GO annotation. 205 candidates were selected.<br>GO:0004871, signal transducer activity<br>GO:0000989, transcription factor activity, transcription factor binding</li><li>Run Lemon-Tree on the 1645 genes with all stable and unstable patients. Clustering result of Lemon-Tree includes 36 clusters with 1456 genes.</li><li>Assign 205 candidate regulators on 36 clusters. 100 highest assignments were selected. 35 of all clusters have regulators. 74 unique regulators were selected.<br>Frequency of regulators occurred more than one time: BRD7(3), ENY2(2), EVI2A(3), GPR65(3), GRN(4), HEYL(6), LANCL1(2), MAP4K4(2), NMI(3), RERE(2), ROR(2), SETD3(2), SS18L2(2), TGFB1I1(2), TOB1(2) </li><li>GO enrichment analysis on the 35 clusters.</li><li>Trace the genes back from WGCNA modules. Most of the genes gathering in one Lemon-Tree cluster are also belong to one WGCNA module.</li><li>Calculate the genes to WGCNA eigengene. Regulator genes tend to have higher correlation to the corresponding WGCNA eigengene.</li></ol><h2 id="Possible-Improvements"><a href="#Possible-Improvements" class="headerlink" title="Possible Improvements"></a>Possible Improvements</h2><ol><li>Check the regulators which regulate more than one cluster.</li><li>Check the GO results to find interesting clusters.</li><li>Add miRNA as regulators.</li></ol><h2 id="Variables-in-R"><a href="#Variables-in-R" class="headerlink" title="Variables in R"></a>Variables in R</h2><ul><li><code>transcriptomics.stable</code>    #WGCNA data</li><li><code>moduleColors.stable</code>    #WGCNA modules</li><li><code>regulators.old</code>        # GO:0004871 &amp; GO:0000989 genes</li><li><code>stable.arg1.modules</code>    #7 interesting modules</li><li><code>stable.arg1.genes</code>    #selected genes from 7 modules</li><li><code>arg1.transcriptomics.stableandunstable.scaled</code>        #scaled data for Lemon-Tree, 1645 genes</li><li><code>ID.nodup/arg1.transcriptomics.IDs</code>    #ID information</li><li><code>arg1.regulators.old</code>    #candidate regulators for 7 modules</li><li><code>tight.clusters.su</code>    #Lemon-Tree clustering result, 1456 genes</li><li><code>top.regs.su.old</code>        #top 100 regulator assignments</li><li><code>reg.list.su.old</code>        #regulator list for output</li><li><code>reg.gene.list.su.old</code>    $regulator and gene list for output</li></ul><h2 id="Lemon-Tree程序的基本步骤"><a href="#Lemon-Tree程序的基本步骤" class="headerlink" title="Lemon Tree程序的基本步骤"></a>Lemon Tree程序的基本步骤</h2><h3 id="ganesh"><a href="#ganesh" class="headerlink" title="ganesh"></a>ganesh</h3><p>通过gibbs sampling进行双向聚类：</p><ol><li>随机分配N个gene到K0个类，随机分配M个样本到Lk,0个样本类。</li><li>N次循环，从某类中随机删除gene i，对每个类，以及i单独成为一类的情况，计算将i放入k中的贝叶斯概率。</li><li>经过n次迭代得到稳定的聚类结果。</li></ol><h3 id="tight-cluster"><a href="#tight-cluster" class="headerlink" title="tight_cluster"></a>tight_cluster</h3><h3 id="regulators"><a href="#regulators" class="headerlink" title="regulators"></a>regulators</h3><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>首先要标准化 scale features</p><p>其次要选择candidate regulator genes from GO annotation</p><h2 id="相关文献-References"><a href="#相关文献-References" class="headerlink" title="相关文献 References"></a>相关文献 References</h2><ul><li>Segal E, Shapira M, Regev A, Pe’er D, Botstein D, et al.(2003) <a href="https://www.nature.com/articles/ng1165" target="_blank" rel="external">Module networks: identifying regulatory modules and their condition-specific regulators from gene expression data</a>. Nature Genetics 34: 166–167.</li><li>Bonnet E, Calzone L, Michoel T. (2015) <a href="http://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1003983" target="_blank" rel="external">Integrative multi-omics module network inference with Lemon-Tree</a>. PLoS Comput Biol 11(2): e1003983.</li><li>Joshi A, Van de Peer Y, Michoel T (2008) <a href="https://academic.oup.com/bioinformatics/article/24/2/176/2748127/Analysis-of-a-Gibbs-sampler-method-for-model-based" target="_blank" rel="external">Analysis of a Gibbs sampler for model based clustering of gene expression data</a>. Bioinformatics 24: 176–183.</li><li>Joshi A, De Smet R, Marchal K,Van de Peer Y, Michoel T( 2009) <a href="https://academic.oup.com/bioinformatics/article/25/4/490/249900/Module-networks-revisited-computational-assessment" target="_blank" rel="external">Module networks revisited: computational assessment and prioritization of model predictions</a>. Bioinformatics 25: 490- 496.</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;This is to show how to run Lemon-Tree algorithm on our dataset.&lt;br&gt;
    
    </summary>
    
      <category term="Research" scheme="http://hanunimaas.com/categories/Research/"/>
    
    
  </entry>
  
  <entry>
    <title>R语言学习（一）入门</title>
    <link href="http://hanunimaas.com/2017/10/26/R_programming_1/"/>
    <id>http://hanunimaas.com/2017/10/26/R_programming_1/</id>
    <published>2017-10-26T07:16:27.000Z</published>
    <updated>2017-11-20T10:41:41.805Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://cran.r-project.org" target="_blank" rel="external">R语言</a>免费，开源，语法简单，适合从事数学、统计学等非计算机人员学习使用。<br>此文以一个计算机专业人员的角度学习和使用R语言。<br><a id="more"></a></p><h2 id="运行R程序"><a href="#运行R程序" class="headerlink" title="运行R程序"></a>运行R程序</h2><h3 id="交互模式"><a href="#交互模式" class="headerlink" title="交互模式"></a>交互模式</h3><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; <span class="keyword">source</span>(<span class="string">"z.R"</span>)</div></pre></td></tr></table></figure><h3 id="批处理模式-ubuntu-terminal"><a href="#批处理模式-ubuntu-terminal" class="headerlink" title="批处理模式(ubuntu terminal)"></a>批处理模式(ubuntu terminal)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">$ R CMD BATCH z.R</div></pre></td></tr></table></figure><h2 id="R语言函数的变量作用域"><a href="#R语言函数的变量作用域" class="headerlink" title="R语言函数的变量作用域"></a>R语言函数的变量作用域</h2><h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><p>只有函数体内部可见的变量是“局部变量”</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- <span class="number">5</span></div><div class="line">&gt; f &lt;- <span class="keyword">function</span>() x &lt;-<span class="number">4</span></div><div class="line">&gt; f()</div><div class="line">&gt; x</div><div class="line">[<span class="number">1</span>] <span class="number">5</span></div></pre></td></tr></table></figure><h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><p>全局变量是在函数之外创建的变量，在函数内部也可以访问。<br>可以通过&lt;&lt;-在函数内部给全局变量赋值</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; y &lt;- <span class="number">4</span></div><div class="line">&gt; f &lt;- <span class="keyword">function</span>(x) y &lt;&lt;- <span class="number">3</span></div><div class="line">&gt; f()</div><div class="line">&gt; y</div><div class="line">[<span class="number">1</span>] <span class="number">3</span></div></pre></td></tr></table></figure><h3 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h3><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; g &lt;- <span class="keyword">function</span>(x, y=<span class="number">2</span>, z=<span class="literal">T</span>)&#123;<span class="keyword">...</span>&#125;</div></pre></td></tr></table></figure><h2 id="R语言的数据结构"><a href="#R语言的数据结构" class="headerlink" title="R语言的数据结构"></a>R语言的数据结构</h2><h3 id="1-向量-Vector"><a href="#1-向量-Vector" class="headerlink" title="1. 向量 Vector"></a>1. 向量 Vector</h3><p>向量是R语言的核心。一个向量内部的数据类型是单一的，不可以由整数元素和字符串混合构成。<br>在R语言中即使单个的数实际上也是由向量所表示的</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- <span class="number">8</span></div><div class="line">&gt; x</div><div class="line">[<span class="number">1</span>] <span class="number">8</span></div></pre></td></tr></table></figure><h3 id="2-字符串-Character"><a href="#2-字符串-Character" class="headerlink" title="2. 字符串 Character"></a>2. 字符串 Character</h3><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; y &lt;- <span class="string">"abc"</span></div><div class="line">&gt; y</div><div class="line">[<span class="number">1</span>] <span class="string">"abc"</span></div><div class="line">&gt; length(y)</div><div class="line">[<span class="number">1</span>] <span class="number">1</span></div></pre></td></tr></table></figure><h4 id="字符串连接与分割"><a href="#字符串连接与分割" class="headerlink" title="字符串连接与分割"></a>字符串连接与分割</h4><p>使用<code>paste</code>连接字符串，用<code>strsplit</code>分割字符串</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; u &lt;- paste(<span class="string">"abc"</span>, <span class="string">"de"</span>, <span class="string">"f"</span>)</div><div class="line">&gt; u</div><div class="line">[<span class="number">1</span>] <span class="string">"abc de f"</span></div><div class="line">&gt; v &lt;- strsplit(u, <span class="string">" "</span>)</div><div class="line">&gt; v</div><div class="line">[[<span class="number">1</span>]]</div><div class="line">[<span class="number">1</span>] <span class="string">"abc"</span> <span class="string">"de"</span>  <span class="string">"f"</span>  </div><div class="line"></div><div class="line">&gt; v[[<span class="number">1</span>]]</div><div class="line">[<span class="number">1</span>] <span class="string">"abc"</span> <span class="string">"de"</span>  <span class="string">"f"</span>  </div><div class="line">&gt;</div></pre></td></tr></table></figure><h3 id="3-矩阵-Matrix"><a href="#3-矩阵-Matrix" class="headerlink" title="3. 矩阵 Matrix"></a>3. 矩阵 Matrix</h3><p>也可以理解为按列存放的向量</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; m &lt;- rbind(rnorm(<span class="number">2</span>), rnorm(<span class="number">2</span>))</div><div class="line">&gt; m</div><div class="line">           [,<span class="number">1</span>]       [,<span class="number">2</span>]</div><div class="line">[<span class="number">1</span>,] <span class="number">0.07614777</span> <span class="number">0.26227249</span></div><div class="line">[<span class="number">2</span>,] <span class="number">0.81721921</span> <span class="number">0.05898863</span></div><div class="line">&gt; m[<span class="number">3</span>]</div><div class="line">[<span class="number">1</span>] <span class="number">0.2622725</span></div><div class="line">&gt;</div></pre></td></tr></table></figure><h3 id="4-列表-List"><a href="#4-列表-List" class="headerlink" title="4. 列表 List"></a>4. 列表 List</h3><h4 id="创建列表"><a href="#创建列表" class="headerlink" title="创建列表"></a>创建列表</h4><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; x &lt;- list(u = <span class="number">2</span>, v = <span class="string">"abc"</span>)</div><div class="line">&gt; x</div><div class="line">$u</div><div class="line">[<span class="number">1</span>] <span class="number">2</span></div><div class="line"></div><div class="line">$v</div><div class="line">[<span class="number">1</span>] <span class="string">"abc"</span></div><div class="line"></div><div class="line">&gt; x$u</div><div class="line">[<span class="number">1</span>] <span class="number">2</span></div></pre></td></tr></table></figure><h4 id="列表作为函数返回值"><a href="#列表作为函数返回值" class="headerlink" title="列表作为函数返回值"></a>列表作为函数返回值</h4><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; hn &lt;- hist(Nile)</div><div class="line">&gt; hn</div><div class="line">$breaks</div><div class="line"> [<span class="number">1</span>]  <span class="number">400</span>  <span class="number">500</span>  <span class="number">600</span>  <span class="number">700</span>  <span class="number">800</span>  <span class="number">900</span> <span class="number">1000</span> <span class="number">1100</span> <span class="number">1200</span> <span class="number">1300</span> <span class="number">1400</span></div><div class="line"></div><div class="line">$counts</div><div class="line"> [<span class="number">1</span>]  <span class="number">1</span>  <span class="number">0</span>  <span class="number">5</span> <span class="number">20</span> <span class="number">25</span> <span class="number">19</span> <span class="number">12</span> <span class="number">11</span>  <span class="number">6</span>  <span class="number">1</span></div><div class="line"></div><div class="line">$density</div><div class="line"> [<span class="number">1</span>] <span class="number">0.0001</span> <span class="number">0.0000</span> <span class="number">0.0005</span> <span class="number">0.0020</span> <span class="number">0.0025</span> <span class="number">0.0019</span> <span class="number">0.0012</span> <span class="number">0.0011</span> <span class="number">0.0006</span> <span class="number">0.0001</span></div><div class="line"></div><div class="line">$mids</div><div class="line"> [<span class="number">1</span>]  <span class="number">450</span>  <span class="number">550</span>  <span class="number">650</span>  <span class="number">750</span>  <span class="number">850</span>  <span class="number">950</span> <span class="number">1050</span> <span class="number">1150</span> <span class="number">1250</span> <span class="number">1350</span></div><div class="line"></div><div class="line">$xname</div><div class="line">[<span class="number">1</span>] <span class="string">"Nile"</span></div><div class="line"></div><div class="line">$equidist</div><div class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></div><div class="line"></div><div class="line">attr(,<span class="string">"class"</span>)</div><div class="line">[<span class="number">1</span>] <span class="string">"histogram"</span></div></pre></td></tr></table></figure><p>注意<code>attr</code>后面的内容，标志了hn的属性<em>histogram</em><br><br><br>也可使用<code>str()</code>输出列表，更为直观</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; str(hn)</div><div class="line">List of <span class="number">6</span></div><div class="line"> $ breaks  : int [<span class="number">1</span>:<span class="number">11</span>] <span class="number">400</span> <span class="number">500</span> <span class="number">600</span> <span class="number">700</span> <span class="number">800</span> <span class="number">900</span> <span class="number">1000</span> <span class="number">1100</span> <span class="number">1200</span> <span class="number">1300</span> <span class="keyword">...</span></div><div class="line"> $ counts  : int [<span class="number">1</span>:<span class="number">10</span>] <span class="number">1</span> <span class="number">0</span> <span class="number">5</span> <span class="number">20</span> <span class="number">25</span> <span class="number">19</span> <span class="number">12</span> <span class="number">11</span> <span class="number">6</span> <span class="number">1</span></div><div class="line"> $ density : num [<span class="number">1</span>:<span class="number">10</span>] <span class="number">0.0001</span> <span class="number">0</span> <span class="number">0.0005</span> <span class="number">0.002</span> <span class="number">0.0025</span> <span class="number">0.0019</span> <span class="number">0.0012</span> <span class="number">0.0011</span> <span class="number">0.0006</span> <span class="number">0.0001</span></div><div class="line"> $ mids    : num [<span class="number">1</span>:<span class="number">10</span>] <span class="number">450</span> <span class="number">550</span> <span class="number">650</span> <span class="number">750</span> <span class="number">850</span> <span class="number">950</span> <span class="number">1050</span> <span class="number">1150</span> <span class="number">1250</span> <span class="number">1350</span></div><div class="line"> $ xname   : chr <span class="string">"Nile"</span></div><div class="line"> $ equidist: logi <span class="literal">TRUE</span></div><div class="line"> - attr(*, <span class="string">"class"</span>)= chr <span class="string">"histogram"</span></div></pre></td></tr></table></figure><h3 id="5-数据框-Data-Frame"><a href="#5-数据框-Data-Frame" class="headerlink" title="5. 数据框 Data Frame"></a>5. 数据框 Data Frame</h3><p>实际上是列表，只不过每个列表存储着一列向量。<br><code>data.frame</code>通常通过读取文件来创建，此处不再举例。</p><h3 id="6-类-Class"><a href="#6-类-Class" class="headerlink" title="6. 类 Class"></a>6. 类 Class</h3><p>R语言是一门面向对象的编程语言。每一个对象都有其类别属性，R语言的泛型函数可以根据变量的类别来执行。<br>通过<code>class()</code>查看变量的类</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; hn &lt;- hist(Nile)</div><div class="line">&gt; class(hn)</div><div class="line">[<span class="number">1</span>] <span class="string">"histogram"</span></div></pre></td></tr></table></figure><p><br><br>通过<code>attributes()</code>查看变量的属性，可以直接使用<code>属性(变量)</code>语句</p><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; attributes(hn)</div><div class="line">$names</div><div class="line">[<span class="number">1</span>] <span class="string">"breaks"</span>   <span class="string">"counts"</span>   <span class="string">"density"</span>  <span class="string">"mids"</span>     <span class="string">"xname"</span>    <span class="string">"equidist"</span></div><div class="line"></div><div class="line">$class</div><div class="line">[<span class="number">1</span>] <span class="string">"histogram"</span></div><div class="line"></div><div class="line">&gt; names(hn)</div><div class="line">[<span class="number">1</span>] <span class="string">"breaks"</span>   <span class="string">"counts"</span>   <span class="string">"density"</span>  <span class="string">"mids"</span>     <span class="string">"xname"</span>    <span class="string">"equidist"</span></div></pre></td></tr></table></figure><h2 id="总结变量（对象）的类型"><a href="#总结变量（对象）的类型" class="headerlink" title="总结变量（对象）的类型"></a>总结变量（对象）的类型</h2><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">&gt; m &lt;- rbind(rnorm(<span class="number">2</span>), rnorm(<span class="number">2</span>))</div><div class="line">&gt; m</div><div class="line">           [,<span class="number">1</span>]       [,<span class="number">2</span>]</div><div class="line">[<span class="number">1</span>,] <span class="number">0.07614777</span> <span class="number">0.26227249</span></div><div class="line">[<span class="number">2</span>,] <span class="number">0.81721921</span> <span class="number">0.05898863</span></div><div class="line">&gt; typeof(m)</div><div class="line">[<span class="number">1</span>] <span class="string">"double"</span></div><div class="line">&gt; mode(m)</div><div class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></div><div class="line">&gt; attributes(m)</div><div class="line">$dim</div><div class="line">[<span class="number">1</span>] <span class="number">2</span> <span class="number">2</span></div><div class="line"></div><div class="line">&gt; class(m)</div><div class="line">[<span class="number">1</span>] <span class="string">"matrix"</span></div></pre></td></tr></table></figure><h2 id="清空环境变量"><a href="#清空环境变量" class="headerlink" title="清空环境变量"></a>清空环境变量</h2><figure class="highlight r"><table><tr><td class="code"><pre><div class="line">rm(list = ls())</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://cran.r-project.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;R语言&lt;/a&gt;免费，开源，语法简单，适合从事数学、统计学等非计算机人员学习使用。&lt;br&gt;此文以一个计算机专业人员的角度学习和使用R语言。&lt;br&gt;
    
    </summary>
    
      <category term="R programming" scheme="http://hanunimaas.com/categories/R-programming/"/>
    
    
  </entry>
  
  <entry>
    <title>博士学习计划</title>
    <link href="http://hanunimaas.com/2017/10/25/study_plan/"/>
    <id>http://hanunimaas.com/2017/10/25/study_plan/</id>
    <published>2017-10-25T06:39:22.000Z</published>
    <updated>2017-11-21T19:25:10.802Z</updated>
    
    <content type="html"><![CDATA[<p>毕业之前应当要完成的事。<br><a id="more"></a></p><h2 id="应掌握的技能"><a href="#应掌握的技能" class="headerlink" title="应掌握的技能"></a>应掌握的技能</h2><ul><li>精通R语言，以计算机专业人员而非统计学家那样使用R语言。</li><li>掌握spark分布式计算，学习scala，具备分布式编程能力。</li><li>追踪最新的机器学习算法，比如深度学习和神经网络等，学习CUDA。</li></ul><h2 id="应发表的文章"><a href="#应发表的文章" class="headerlink" title="应发表的文章"></a>应发表的文章</h2><ul><li>一作SCI： 3-5篇，应有1-2篇高质量文章</li><li>非一作SCI： 若干</li></ul><p>目前一篇Nature Communications在投。</p><h2 id="在美国的顶级实验室实习"><a href="#在美国的顶级实验室实习" class="headerlink" title="在美国的顶级实验室实习"></a>在美国的顶级实验室实习</h2><p>备选top lab：</p><ul><li>Havard University(哈佛大学)</li><li>Northeastern University(东北大学): <a href="https://www.barabasilab.com" target="_blank" rel="external">Barabási Lab</a></li></ul><h2 id="应去国家"><a href="#应去国家" class="headerlink" title="应去国家"></a>应去国家</h2><ul><li>已去过：英国、法国、德国、美国、荷兰、比利时、意大利、西班牙、葡萄牙、奥地利、瑞典、丹麦、卢森堡、土耳其、匈牙利、斯洛伐克、斯洛文尼亚、罗马尼亚、梵蒂冈、摩纳哥、新加坡、印度尼西亚、</li><li>将来要去：摩洛哥、希腊、俄罗斯、芬兰、爱沙尼亚、拉脱维亚、立陶宛、波兰、挪威、冰岛、保加利亚、克罗地亚、塞尔维亚、阿根廷、南极</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;毕业之前应当要完成的事。&lt;br&gt;
    
    </summary>
    
      <category term="Others" scheme="http://hanunimaas.com/categories/Others/"/>
    
    
  </entry>
  
</feed>
